{"title":"DSAN 6300 Mini-Project","markdown":{"yaml":{"title":"DSAN 6300 Mini-Project","subtitle":"Thanksgiving Travel 2024: America's Busiest Holiday Travel Period","author":"Eleanor Byrd","date":"last-modified","bibliography":"references.bib","format":{"html":{"theme":"cosmo","toc":true,"embed-resources":true,"code-fold":true,"code-summary":"Show code"}}},"headingText":"load packages","containsRefs":false,"markdown":"\n\n```{python}\n#| include: false\n#| label: setup\n\nimport pandas as pd\nimport plotly.express as px\nimport numpy as np\nimport plotly.graph_objects as go\nfrom datetime import datetime\nfrom IPython.display import HTML\n```\n\n# Introduction \n\nAccording to TSA checkpoint data, 2024 saw record passenger volumes throughout the year. In fact, the Sunday after Thanksgiving, December 1st, 2024, was the busiest travel day of the year, at 3,088,836 passengers (@tsa2024volumes).\n\nMillions of Americans travel home to spend the holiday with family during the days leading up to and following Thanksgiving. This time is often one of the busiest travel periods for the aviation industry in America, but no one wants to miss Thanksgiving dinner. \n\nThis report analyzes flight data in November 2024 in order to examine flight volumes, delays, and cancellations by airlines and airports across the US during the Thanksgiving holiday period (@BTS_Carrier_Performace). We investigate which days are more congested, which airlines are more delay prone, and where you definitely don't want to be. Whether you're a passenger deciding how and when to travel or an airline or airport trying to provide the best service to customers, this report will help you navigate the turbulence of Thanksgiving flight. \n\n# Is there a better day to fly?\n\n```{python}\n#| label: num-flights-by-day\n#| echo: true \n\n# import sql output\ndf3 = pd.read_csv(\"../data/sql_output/eb1481_ellie_byrd_miniproject_output3.csv\", low_memory=False)\n\n# make plot \nday_order = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']\nfig = px.bar(df3, \n             x='weekday', \n             y='num_flights',\n             orientation='v',\n             title='Number of Flights by Weekday - November 2024',\n             labels={'num_flights': 'Number of Flights',\n                    'weekday': 'Day of Week'},\n             color='num_flights',\n             color_continuous_scale='Reds',\n             range_color=[55000, df3['num_flights'].max()])\nfig.update_xaxes(categoryorder='array', categoryarray=day_order)\nfig.update_layout(showlegend=False)\nfig.update_coloraxes(showscale=False)\nfig.show()\n```\n\nThis plot shows the total number of flights in November 2024, aggregated by day of week. We can see that across the whole month, **Thursday has the fewest total flights.** This could be because Thanksgiving itself, which is on a Thursday, could have fewer flights than normal because it is a holiday. In fact, according to the @tsa2024volumes, the Thursday of Thanksgiving only had 1.5 million passengers, where as the days surrounding it all have over 2 million, some nearing 3. It might be the least busy day to fly of the month, but you'd be cutting it close to get to dinner!\n\nFriday has the most total flights in November, followed by Saturday, Sunday, and then Monday. This seems consistent with normal weekend flight patterns. After Thursdays, **Tuesdays and Wednesdays have lower flight volume across the entire month,** but choosing the Tuesday or Wednesday right before Thanksgiving to travel might not be the best idea. To illustrate this, we dive into more specific monthly trends below. \n\n```{python}\n#| label: avg-num-flights-past-3-days\n#| echo: true\n\n# import sql output\ndf7 = pd.read_csv(\"../data/sql_output/eb1481_ellie_byrd_miniproject_output7.csv\", low_memory=False)\ndf7['FlightDate'] = pd.to_datetime(df7['FlightDate'])\n\n# make plot \nfig = go.Figure()\n\n# add rolling average line\nfig.add_trace(go.Scatter(\n    x=df7['FlightDate'], \n    y=df7['avg_num_flights'],\n    mode='lines',\n    line=dict(color='#2c3e50', width=3)\n))\n\n# add Thanksgiving vertical line\nfig.add_vline(x=datetime(2024,11,28).timestamp() * 1000, line_dash=\"dash\", line_color='rgb(239,59,44)',\n              annotation_text=\"Thanksgiving\", annotation_position=\"top\")\n\n# add shading for peak travel period \nfig.add_vrect(x0=datetime(2024, 11, 22), x1=datetime(2024, 11, 30), \n              fillcolor='rgb(239,59,44)', opacity=0.1)\n\n# add title and labels\nfig.update_layout(\n    title='3-Day Moving Average Number of Flights - November 2024',\n    xaxis_title='Date',\n    yaxis_title='Number of Flights',\n    hovermode='x unified'\n)\n\nfig.show()\n```\n\nThis plot shows a three day moving average of the daily number of flights across November. For each day, the number shown is the average number of flights for the three previous days. Thanksgiving is clearly marked at the peak, meaning the Monday, Tuesday, and Wednesday leading up to Thanksgiving had, on average, over 21 thousand flights across the U.S. In fact, the rolling average begins a sharp increase on November 22nd, which was the Friday before Thanksgiving in 2024. This data seems to suggest that if possible, **traveling earlier before Thanksgiving is better.** Unfortunately, since this may not be possible for many people, we next look into which airlines might get you there the fastest. \n\n\n# Is there a better airline to fly? \n\n```{python}\n#| label: max-delay-by-airline\n#| echo: true\n\n# import sql output\ndf1 = pd.read_csv(\"../data/sql_output/eb1481_ellie_byrd_miniproject_output1.csv\", low_memory=False)\n\n# make plot \nfig = px.bar(df1, \n             x='maximum_delay', \n             y='name',\n             orientation='h',\n             title='Maximum Departure Delays by Airline - November 2024',\n             labels={'maximum_delay': 'Maximum Delay (minutes)',\n                    'name': 'Airline'},\n             color='maximum_delay',\n             color_continuous_scale='Reds')\nfig.update_layout(showlegend=False)\nfig.update_coloraxes(showscale=False)\nfig.show()\n```\n\nThis plot shows that **American Airlines** has the greatest departure delay of any flight, of any airline, in the month of November 2024, with a delay of 2573 minutes, almost 2 days! The next greatest delay is from PSA Airlines, which is actually a subsidiary of American Airlines (see @PSA_Airlines_about), so a flight booked with American might be run by PSA or another American Eagle partner. All in all, if you're flying American, you might want to book an earlier flight or budget more time!\n\nThe airline with the least maximum delay is **Southwest**, only 556 minutes. One surprising fact is that Spirit Airlines, which has a historic reputation of delays and cancellations, had the third lowest maximum delay in November 2024. Based on this data, Southwest or Spirit flights might get you to Thanksgiving dinner on time!\n\n```{python}\n#| label: max-avg-delay-airport-by-airline\n#| echo: true\n\n# import sql output\ndf5 = pd.read_csv(\"../data/sql_output/eb1481_ellie_byrd_miniproject_output5.csv\", low_memory=False)\ndf5[\"airport\"] = df5[\"airport_name\"].str.split(':', expand=True)[1].str.strip()\ndf5[\"location\"] = df5[\"airport_name\"].str.split(':', expand=True)[0].str.strip()\ndf5 = df5.sort_values(\"avg_delay\")\n\n# import airport geography output \ncols = ['AIRPORT','DISPLAY_AIRPORT_NAME','DISPLAY_AIRPORT_CITY_NAME_FULL','AIRPORT_START_DATE']\nairport_code = pd.read_csv(\"../data/airport_geographic_data.csv\", usecols=cols, low_memory=False)\nairport_code = airport_code.sort_values('AIRPORT_START_DATE', ascending=False).drop_duplicates(subset=['DISPLAY_AIRPORT_NAME','DISPLAY_AIRPORT_CITY_NAME_FULL'], keep='first')\n\n# merge \ndf5 = pd.merge(df5, airport_code, how=\"left\", left_on=['airport', 'location'], right_on=['DISPLAY_AIRPORT_NAME','DISPLAY_AIRPORT_CITY_NAME_FULL'])\n\n# make plot \nfig = go.Figure()\n\n# add vertical stems\nfor i, row in df5.iterrows():\n    fig.add_trace(go.Scatter(\n        x=[row[\"airline_name\"], row[\"airline_name\"]],\n        y=[0, row[\"avg_delay\"]],\n        mode=\"lines\",\n        line=dict(width=2, color=\"black\"),\n        hoverinfo=\"skip\",\n        showlegend=False\n    ))\n\n# add dots \ncustomdata = df5[[\"airport\", \"location\"]].to_numpy()\nfig.add_trace(go.Scatter(\n    x=df5[\"airline_name\"],\n    y=df5[\"avg_delay\"],\n    mode=\"markers+text\",\n    text=df5[\"AIRPORT\"],\n    textposition=\"middle center\",  \n    textfont=dict(\n        size=9,\n        color=\"white\",\n        weight=\"bold\"\n    ),\n    marker=dict(\n        size=30,  \n        color='rgb(239,59,44)', \n        opacity=1,           \n        line=dict(\n            color=\"black\",       \n            width=1.5\n        ),\n    ),\n    customdata=customdata,\n    hovertemplate=(\n        \"<b>Airport: %{customdata[0]}</b><br>\" +\n        \"Location: %{customdata[1]}<br>\" +\n        \"Avg Delay: %{y} minutes<extra></extra>\"\n    ),\n    showlegend=False\n))\n\nfig.update_layout(\n    title=\"Average Delay for Each Airline at Maximum Delay Airport\",\n    xaxis_title=\"Airline\",\n    yaxis_title=\"Avg Delay (minutes)\",\n    height=650\n)\n\nfig.show()\n```\n\nThis plot shows the average delay of each airline, at the airport where the airline has the maximum average delay. Consistent with above, American Airlines has the highest average delay, specifically at Northwest Florida Beaches International Airport in Panama City, FL. Other airlines with high average delays are Allegiant Airlines and SkyWest Airlines, which also are in the top 5 airlines with the highest overall maximum delays from above. \n\nOnce again, based on this data in November 2024, **your best bet for an on-time departure is Southwest Airlines!** Their highest maximum delay, at San Francisco International Airport, was less than 22 minutes. You might make it to Thanksgiving dinner while the turkey is still warm!\n\nBased on this analysis, one airport that could potentially work on improving their service, especially during November and the Thanksgiving holiday period, is Louis Armstrong New Orleans International Airport (MSY), in New Orleans, LA. They appear as the airport with the highest average departure delay for both Allegiant and Frontier Airlines, with the second and fourth highest average delay respectively. New Orleans International might not be the best airport to use for Thanksgiving, but we will explore this further in the next section. \n\n```{python}\n#| label: max-early-departure-by-airline\n#| echo: true\n\n# import sql output\ndf2 = pd.read_csv(\"../data/sql_output/eb1481_ellie_byrd_miniproject_output2.csv\", low_memory=False)\n\n# make plot \nfig = px.bar(df2, \n             x='maximum_early_departure', \n             y='name',\n             orientation='h',\n             title='Maximum Early Departure by Airline - November 2024',\n             labels={'maximum_early_departure': 'Early Departure (minutes)',\n                    'name': 'Airline'},\n             color='maximum_early_departure',\n             color_continuous_scale='Peach')\nfig.update_layout(showlegend=False)\nfig.update_layout(yaxis={'autorange': 'reversed'})\nfig.update_coloraxes(showscale=False)\nfig.show()\n```\n\nOn the flip side, some flights aren't delayed, but they depart earlier than scheduled. This is great if you get to the airport early, but less so if you have a tight connection or hit traffic on the way there. Delta Airlines has the highest maximum early departure, at 43 minutes early, but interestingly, SkyWest and Allegiant also have relatively high maximum early departure, both at 39 minutes. It seems that these two airlines have high extremes in both directions, with high maximum delays and early departures, so flying with either of them might be a gamble during the holiday season. \n\n# Is there a better airport to fly out of? \n\n```{python}\n#| label: highest-avg-delay-airport\n#| echo: false\n#| output: asis\n\n# import sql output\ndf4 = pd.read_csv(\"../data/sql_output/eb1481_ellie_byrd_miniproject_output4.csv\", low_memory=False)\n\n# make plot \nairport_name = df4['name'][0].split(':')[1].strip()\nairport_location = df4['name'][0].split(':')[0].strip()\nairport_code = df4['code'][0]\navg_delay = df4['avg_delay'][0]\n\nHTML(f\"\"\"\n<div style=\"background-color: rgb(239,59,44); \n            padding: 40px; \n            border-radius: 10px; \n            margin: 20px auto; \n            border: 4px solid rgb(165,15,21);\n            text-align: center;\n            max-width: 600px;\">\n    <h3 style=\"color: rgb(103,0,13); margin-top: 0; margin-bottom: 20px;\">November's Most Delayed Airport:</h3>\n    <p style=\"font-size: 24px; color: rgb(255, 255, 255); margin: 15px 0;\">\n        <strong style=\"font-size: 32px;\">{airport_name}</strong>\n    </p>\n    <p style=\"font-size: 20px; color: rgb(255, 255, 255); margin: 15px 0;\">\n        ({airport_code})\n    </p>\n    <p style=\"font-size: 18px; color: rgb(255, 255, 255); margin: 15px 0;\">\n        {airport_location} \n    </p>\n    <p style=\"font-size: 18px; color: rgb(103,0,13); margin-top: 25px;\">\n        Average Departure Delay: <br>\n        <strong style=\"font-size: 28px; color: rgb(255, 255, 255);\">{avg_delay:.1f} minutes</strong>\n    </p>\n</div>\n\"\"\")\n```\n\nAs seen above, the airport with the highest average departure delay across all airlines in November 2024 was Mason City Municipal Airport in Iowa. This may be due to a multitude of reasons that are not explained by this data, but MCW should probably not be a top choice of departure during busy holiday travel. \n\n```{python}\n#| label: cancellation-reason-by-airport\n#| echo: true\n\n# import sql output\ndf6 = pd.read_csv(\"../data/sql_output/eb1481_ellie_byrd_miniproject_output6b.csv\", low_memory=False)\ndf6[\"airport\"] = df6[\"airport_name\"].str.split(':', expand=True)[1].str.strip()\ndf6[\"location\"] = df6[\"airport_name\"].str.split(':', expand=True)[0].str.strip()\n\n# import airport geography output \ncols = ['DISPLAY_AIRPORT_NAME','DISPLAY_AIRPORT_CITY_NAME_FULL','LATITUDE','LONGITUDE','AIRPORT_START_DATE']\nairport_geo = pd.read_csv(\"../data/airport_geographic_data.csv\", usecols=cols, low_memory=False)\nairport_geo = airport_geo.sort_values('AIRPORT_START_DATE', ascending=False).drop_duplicates(subset=['DISPLAY_AIRPORT_NAME','DISPLAY_AIRPORT_CITY_NAME_FULL'], keep='first')\n\n# merge \ndf = pd.merge(df6, airport_geo, how=\"left\", left_on=['airport', 'location'], right_on=['DISPLAY_AIRPORT_NAME','DISPLAY_AIRPORT_CITY_NAME_FULL'])\n\n# make plot \nfig = px.scatter_geo(df,\n                     lat='LATITUDE',\n                     lon='LONGITUDE',\n                     size='num_cancellations',  \n                     size_max=70,\n                     color='cancellation_reason',\n                     color_discrete_map={\n                         'Weather': 'rgb(252, 150, 106)',\n                         'Carrier': 'rgb(255, 0, 0)',\n                         'National Air System': 'rgb(88, 0, 12)'#'rgb(165,15,21)'\n                     },\n                     title='Primary Cancellations at Airports Across the US - November 2024',\n                     hover_name='airport',\n                     hover_data={\n                         'airport': False,  # Hide since it's in hover_name\n                         'location': True,\n                         'cancellation_reason': True,\n                         'num_cancellations': True,\n                         'LATITUDE': False,\n                         'LONGITUDE': False\n                     },\n                     labels={\n                         'location': 'Location',\n                         'cancellation_reason': 'Primary Reason',\n                         'num_cancellations': 'Cancellations'\n                     })\n\n# just us \nfig.update_geos(\n    scope='usa',\n    showland=True,\n    landcolor='rgb(243, 243, 243)',\n    coastlinecolor='rgb(204, 204, 204)',\n)\n\n# bubble outline\nfig.update_traces(\n    marker=dict(\n        line=dict(color='black', width=1)  # Black outline, 1.5px width\n    )\n)\n\n# bigger map\nfig.update_layout(\n    height=700,  \n    margin={\"r\":0, \"t\":50, \"l\":0, \"b\":0},\n    legend=dict(\n        title='Cancellation Reason',\n        yanchor='top',\n        y=0.98,\n        xanchor='left',\n        x=0.01\n    )\n)\n\nfig.show()\n```\n\nIn November 2024, there were **2629 cancelled flights** recorded in the dataset. This plot shows a bubble for every airport in this dataset, colored by primary cancellation reason, and sized according to the number of cancellations for that reason. It is important to note that this isn't the total number of cancellations for that airport, but it is the number of cancellations for that primary reason. The corresponding location data for each airport was gathered from the @bts2024mastercoord. \n\nWe can also see that the **most common reason for flight cancellation is the weather**. Though winter might not technically start until the solstice in December, the month of November, and Thanksgiving at the end of it, often sees colder temperatures and more wintery, stormy conditions. Even airports in more temperate climates, like Florida or southern Texas, were still affected by weather and were forced to cancel flights in November 2024. Unfortunately, these cancellations for weather are difficult to predict, so travelers will just have to hope for the best, and airports and airlines will have to work on their weather preparedness. \n\nAs seen in the plot, the airports with the most cancellations are major hubs, **Dallas/Fort Worth International Airport and Denver International Airport**, with 417 and 326 cancellations respectively in the month of November. These are definitely bigger airports with more flights in general, but other similarly large airports like Atlanta, Chicago, and LA, did not have weather cancellations in the hundreds in November 2024. This could mean that the Dallas and Denver airports need to work on improving their preparedness before and/or services during weather events. If possible, maybe choose a different airport than DFW or DEN for Thanksgiving travel!\n\n# Conclusion \n\nEven in 2025, Thanksgiving travel demand made news headlines as passengers, airports, and airlines braced for the holiday impact (@FAA_2025_ThanksgivingTravel). In November 2024, flight numbers peaked in the days before Thanksgiving, significant delays were seen for American, SkyWest, and Allegiant airlines, and Dallas/Fort Worth and Denver Airports saw hundreds of cancellations. With further analysis, these patterns observed in November 2024 could potentially repeat in future years unless improvements are made. Understanding these patterns can not only help passengers prepare to travel home for Thanksgiving celebrations, but also ensure that American aviation is doing its best during the country's most intense travel period. \n\n# References\n\n\n\n\n","srcMarkdownNoYaml":"\n\n```{python}\n#| include: false\n#| label: setup\n\n# load packages\nimport pandas as pd\nimport plotly.express as px\nimport numpy as np\nimport plotly.graph_objects as go\nfrom datetime import datetime\nfrom IPython.display import HTML\n```\n\n# Introduction \n\nAccording to TSA checkpoint data, 2024 saw record passenger volumes throughout the year. In fact, the Sunday after Thanksgiving, December 1st, 2024, was the busiest travel day of the year, at 3,088,836 passengers (@tsa2024volumes).\n\nMillions of Americans travel home to spend the holiday with family during the days leading up to and following Thanksgiving. This time is often one of the busiest travel periods for the aviation industry in America, but no one wants to miss Thanksgiving dinner. \n\nThis report analyzes flight data in November 2024 in order to examine flight volumes, delays, and cancellations by airlines and airports across the US during the Thanksgiving holiday period (@BTS_Carrier_Performace). We investigate which days are more congested, which airlines are more delay prone, and where you definitely don't want to be. Whether you're a passenger deciding how and when to travel or an airline or airport trying to provide the best service to customers, this report will help you navigate the turbulence of Thanksgiving flight. \n\n# Is there a better day to fly?\n\n```{python}\n#| label: num-flights-by-day\n#| echo: true \n\n# import sql output\ndf3 = pd.read_csv(\"../data/sql_output/eb1481_ellie_byrd_miniproject_output3.csv\", low_memory=False)\n\n# make plot \nday_order = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']\nfig = px.bar(df3, \n             x='weekday', \n             y='num_flights',\n             orientation='v',\n             title='Number of Flights by Weekday - November 2024',\n             labels={'num_flights': 'Number of Flights',\n                    'weekday': 'Day of Week'},\n             color='num_flights',\n             color_continuous_scale='Reds',\n             range_color=[55000, df3['num_flights'].max()])\nfig.update_xaxes(categoryorder='array', categoryarray=day_order)\nfig.update_layout(showlegend=False)\nfig.update_coloraxes(showscale=False)\nfig.show()\n```\n\nThis plot shows the total number of flights in November 2024, aggregated by day of week. We can see that across the whole month, **Thursday has the fewest total flights.** This could be because Thanksgiving itself, which is on a Thursday, could have fewer flights than normal because it is a holiday. In fact, according to the @tsa2024volumes, the Thursday of Thanksgiving only had 1.5 million passengers, where as the days surrounding it all have over 2 million, some nearing 3. It might be the least busy day to fly of the month, but you'd be cutting it close to get to dinner!\n\nFriday has the most total flights in November, followed by Saturday, Sunday, and then Monday. This seems consistent with normal weekend flight patterns. After Thursdays, **Tuesdays and Wednesdays have lower flight volume across the entire month,** but choosing the Tuesday or Wednesday right before Thanksgiving to travel might not be the best idea. To illustrate this, we dive into more specific monthly trends below. \n\n```{python}\n#| label: avg-num-flights-past-3-days\n#| echo: true\n\n# import sql output\ndf7 = pd.read_csv(\"../data/sql_output/eb1481_ellie_byrd_miniproject_output7.csv\", low_memory=False)\ndf7['FlightDate'] = pd.to_datetime(df7['FlightDate'])\n\n# make plot \nfig = go.Figure()\n\n# add rolling average line\nfig.add_trace(go.Scatter(\n    x=df7['FlightDate'], \n    y=df7['avg_num_flights'],\n    mode='lines',\n    line=dict(color='#2c3e50', width=3)\n))\n\n# add Thanksgiving vertical line\nfig.add_vline(x=datetime(2024,11,28).timestamp() * 1000, line_dash=\"dash\", line_color='rgb(239,59,44)',\n              annotation_text=\"Thanksgiving\", annotation_position=\"top\")\n\n# add shading for peak travel period \nfig.add_vrect(x0=datetime(2024, 11, 22), x1=datetime(2024, 11, 30), \n              fillcolor='rgb(239,59,44)', opacity=0.1)\n\n# add title and labels\nfig.update_layout(\n    title='3-Day Moving Average Number of Flights - November 2024',\n    xaxis_title='Date',\n    yaxis_title='Number of Flights',\n    hovermode='x unified'\n)\n\nfig.show()\n```\n\nThis plot shows a three day moving average of the daily number of flights across November. For each day, the number shown is the average number of flights for the three previous days. Thanksgiving is clearly marked at the peak, meaning the Monday, Tuesday, and Wednesday leading up to Thanksgiving had, on average, over 21 thousand flights across the U.S. In fact, the rolling average begins a sharp increase on November 22nd, which was the Friday before Thanksgiving in 2024. This data seems to suggest that if possible, **traveling earlier before Thanksgiving is better.** Unfortunately, since this may not be possible for many people, we next look into which airlines might get you there the fastest. \n\n\n# Is there a better airline to fly? \n\n```{python}\n#| label: max-delay-by-airline\n#| echo: true\n\n# import sql output\ndf1 = pd.read_csv(\"../data/sql_output/eb1481_ellie_byrd_miniproject_output1.csv\", low_memory=False)\n\n# make plot \nfig = px.bar(df1, \n             x='maximum_delay', \n             y='name',\n             orientation='h',\n             title='Maximum Departure Delays by Airline - November 2024',\n             labels={'maximum_delay': 'Maximum Delay (minutes)',\n                    'name': 'Airline'},\n             color='maximum_delay',\n             color_continuous_scale='Reds')\nfig.update_layout(showlegend=False)\nfig.update_coloraxes(showscale=False)\nfig.show()\n```\n\nThis plot shows that **American Airlines** has the greatest departure delay of any flight, of any airline, in the month of November 2024, with a delay of 2573 minutes, almost 2 days! The next greatest delay is from PSA Airlines, which is actually a subsidiary of American Airlines (see @PSA_Airlines_about), so a flight booked with American might be run by PSA or another American Eagle partner. All in all, if you're flying American, you might want to book an earlier flight or budget more time!\n\nThe airline with the least maximum delay is **Southwest**, only 556 minutes. One surprising fact is that Spirit Airlines, which has a historic reputation of delays and cancellations, had the third lowest maximum delay in November 2024. Based on this data, Southwest or Spirit flights might get you to Thanksgiving dinner on time!\n\n```{python}\n#| label: max-avg-delay-airport-by-airline\n#| echo: true\n\n# import sql output\ndf5 = pd.read_csv(\"../data/sql_output/eb1481_ellie_byrd_miniproject_output5.csv\", low_memory=False)\ndf5[\"airport\"] = df5[\"airport_name\"].str.split(':', expand=True)[1].str.strip()\ndf5[\"location\"] = df5[\"airport_name\"].str.split(':', expand=True)[0].str.strip()\ndf5 = df5.sort_values(\"avg_delay\")\n\n# import airport geography output \ncols = ['AIRPORT','DISPLAY_AIRPORT_NAME','DISPLAY_AIRPORT_CITY_NAME_FULL','AIRPORT_START_DATE']\nairport_code = pd.read_csv(\"../data/airport_geographic_data.csv\", usecols=cols, low_memory=False)\nairport_code = airport_code.sort_values('AIRPORT_START_DATE', ascending=False).drop_duplicates(subset=['DISPLAY_AIRPORT_NAME','DISPLAY_AIRPORT_CITY_NAME_FULL'], keep='first')\n\n# merge \ndf5 = pd.merge(df5, airport_code, how=\"left\", left_on=['airport', 'location'], right_on=['DISPLAY_AIRPORT_NAME','DISPLAY_AIRPORT_CITY_NAME_FULL'])\n\n# make plot \nfig = go.Figure()\n\n# add vertical stems\nfor i, row in df5.iterrows():\n    fig.add_trace(go.Scatter(\n        x=[row[\"airline_name\"], row[\"airline_name\"]],\n        y=[0, row[\"avg_delay\"]],\n        mode=\"lines\",\n        line=dict(width=2, color=\"black\"),\n        hoverinfo=\"skip\",\n        showlegend=False\n    ))\n\n# add dots \ncustomdata = df5[[\"airport\", \"location\"]].to_numpy()\nfig.add_trace(go.Scatter(\n    x=df5[\"airline_name\"],\n    y=df5[\"avg_delay\"],\n    mode=\"markers+text\",\n    text=df5[\"AIRPORT\"],\n    textposition=\"middle center\",  \n    textfont=dict(\n        size=9,\n        color=\"white\",\n        weight=\"bold\"\n    ),\n    marker=dict(\n        size=30,  \n        color='rgb(239,59,44)', \n        opacity=1,           \n        line=dict(\n            color=\"black\",       \n            width=1.5\n        ),\n    ),\n    customdata=customdata,\n    hovertemplate=(\n        \"<b>Airport: %{customdata[0]}</b><br>\" +\n        \"Location: %{customdata[1]}<br>\" +\n        \"Avg Delay: %{y} minutes<extra></extra>\"\n    ),\n    showlegend=False\n))\n\nfig.update_layout(\n    title=\"Average Delay for Each Airline at Maximum Delay Airport\",\n    xaxis_title=\"Airline\",\n    yaxis_title=\"Avg Delay (minutes)\",\n    height=650\n)\n\nfig.show()\n```\n\nThis plot shows the average delay of each airline, at the airport where the airline has the maximum average delay. Consistent with above, American Airlines has the highest average delay, specifically at Northwest Florida Beaches International Airport in Panama City, FL. Other airlines with high average delays are Allegiant Airlines and SkyWest Airlines, which also are in the top 5 airlines with the highest overall maximum delays from above. \n\nOnce again, based on this data in November 2024, **your best bet for an on-time departure is Southwest Airlines!** Their highest maximum delay, at San Francisco International Airport, was less than 22 minutes. You might make it to Thanksgiving dinner while the turkey is still warm!\n\nBased on this analysis, one airport that could potentially work on improving their service, especially during November and the Thanksgiving holiday period, is Louis Armstrong New Orleans International Airport (MSY), in New Orleans, LA. They appear as the airport with the highest average departure delay for both Allegiant and Frontier Airlines, with the second and fourth highest average delay respectively. New Orleans International might not be the best airport to use for Thanksgiving, but we will explore this further in the next section. \n\n```{python}\n#| label: max-early-departure-by-airline\n#| echo: true\n\n# import sql output\ndf2 = pd.read_csv(\"../data/sql_output/eb1481_ellie_byrd_miniproject_output2.csv\", low_memory=False)\n\n# make plot \nfig = px.bar(df2, \n             x='maximum_early_departure', \n             y='name',\n             orientation='h',\n             title='Maximum Early Departure by Airline - November 2024',\n             labels={'maximum_early_departure': 'Early Departure (minutes)',\n                    'name': 'Airline'},\n             color='maximum_early_departure',\n             color_continuous_scale='Peach')\nfig.update_layout(showlegend=False)\nfig.update_layout(yaxis={'autorange': 'reversed'})\nfig.update_coloraxes(showscale=False)\nfig.show()\n```\n\nOn the flip side, some flights aren't delayed, but they depart earlier than scheduled. This is great if you get to the airport early, but less so if you have a tight connection or hit traffic on the way there. Delta Airlines has the highest maximum early departure, at 43 minutes early, but interestingly, SkyWest and Allegiant also have relatively high maximum early departure, both at 39 minutes. It seems that these two airlines have high extremes in both directions, with high maximum delays and early departures, so flying with either of them might be a gamble during the holiday season. \n\n# Is there a better airport to fly out of? \n\n```{python}\n#| label: highest-avg-delay-airport\n#| echo: false\n#| output: asis\n\n# import sql output\ndf4 = pd.read_csv(\"../data/sql_output/eb1481_ellie_byrd_miniproject_output4.csv\", low_memory=False)\n\n# make plot \nairport_name = df4['name'][0].split(':')[1].strip()\nairport_location = df4['name'][0].split(':')[0].strip()\nairport_code = df4['code'][0]\navg_delay = df4['avg_delay'][0]\n\nHTML(f\"\"\"\n<div style=\"background-color: rgb(239,59,44); \n            padding: 40px; \n            border-radius: 10px; \n            margin: 20px auto; \n            border: 4px solid rgb(165,15,21);\n            text-align: center;\n            max-width: 600px;\">\n    <h3 style=\"color: rgb(103,0,13); margin-top: 0; margin-bottom: 20px;\">November's Most Delayed Airport:</h3>\n    <p style=\"font-size: 24px; color: rgb(255, 255, 255); margin: 15px 0;\">\n        <strong style=\"font-size: 32px;\">{airport_name}</strong>\n    </p>\n    <p style=\"font-size: 20px; color: rgb(255, 255, 255); margin: 15px 0;\">\n        ({airport_code})\n    </p>\n    <p style=\"font-size: 18px; color: rgb(255, 255, 255); margin: 15px 0;\">\n        {airport_location} \n    </p>\n    <p style=\"font-size: 18px; color: rgb(103,0,13); margin-top: 25px;\">\n        Average Departure Delay: <br>\n        <strong style=\"font-size: 28px; color: rgb(255, 255, 255);\">{avg_delay:.1f} minutes</strong>\n    </p>\n</div>\n\"\"\")\n```\n\nAs seen above, the airport with the highest average departure delay across all airlines in November 2024 was Mason City Municipal Airport in Iowa. This may be due to a multitude of reasons that are not explained by this data, but MCW should probably not be a top choice of departure during busy holiday travel. \n\n```{python}\n#| label: cancellation-reason-by-airport\n#| echo: true\n\n# import sql output\ndf6 = pd.read_csv(\"../data/sql_output/eb1481_ellie_byrd_miniproject_output6b.csv\", low_memory=False)\ndf6[\"airport\"] = df6[\"airport_name\"].str.split(':', expand=True)[1].str.strip()\ndf6[\"location\"] = df6[\"airport_name\"].str.split(':', expand=True)[0].str.strip()\n\n# import airport geography output \ncols = ['DISPLAY_AIRPORT_NAME','DISPLAY_AIRPORT_CITY_NAME_FULL','LATITUDE','LONGITUDE','AIRPORT_START_DATE']\nairport_geo = pd.read_csv(\"../data/airport_geographic_data.csv\", usecols=cols, low_memory=False)\nairport_geo = airport_geo.sort_values('AIRPORT_START_DATE', ascending=False).drop_duplicates(subset=['DISPLAY_AIRPORT_NAME','DISPLAY_AIRPORT_CITY_NAME_FULL'], keep='first')\n\n# merge \ndf = pd.merge(df6, airport_geo, how=\"left\", left_on=['airport', 'location'], right_on=['DISPLAY_AIRPORT_NAME','DISPLAY_AIRPORT_CITY_NAME_FULL'])\n\n# make plot \nfig = px.scatter_geo(df,\n                     lat='LATITUDE',\n                     lon='LONGITUDE',\n                     size='num_cancellations',  \n                     size_max=70,\n                     color='cancellation_reason',\n                     color_discrete_map={\n                         'Weather': 'rgb(252, 150, 106)',\n                         'Carrier': 'rgb(255, 0, 0)',\n                         'National Air System': 'rgb(88, 0, 12)'#'rgb(165,15,21)'\n                     },\n                     title='Primary Cancellations at Airports Across the US - November 2024',\n                     hover_name='airport',\n                     hover_data={\n                         'airport': False,  # Hide since it's in hover_name\n                         'location': True,\n                         'cancellation_reason': True,\n                         'num_cancellations': True,\n                         'LATITUDE': False,\n                         'LONGITUDE': False\n                     },\n                     labels={\n                         'location': 'Location',\n                         'cancellation_reason': 'Primary Reason',\n                         'num_cancellations': 'Cancellations'\n                     })\n\n# just us \nfig.update_geos(\n    scope='usa',\n    showland=True,\n    landcolor='rgb(243, 243, 243)',\n    coastlinecolor='rgb(204, 204, 204)',\n)\n\n# bubble outline\nfig.update_traces(\n    marker=dict(\n        line=dict(color='black', width=1)  # Black outline, 1.5px width\n    )\n)\n\n# bigger map\nfig.update_layout(\n    height=700,  \n    margin={\"r\":0, \"t\":50, \"l\":0, \"b\":0},\n    legend=dict(\n        title='Cancellation Reason',\n        yanchor='top',\n        y=0.98,\n        xanchor='left',\n        x=0.01\n    )\n)\n\nfig.show()\n```\n\nIn November 2024, there were **2629 cancelled flights** recorded in the dataset. This plot shows a bubble for every airport in this dataset, colored by primary cancellation reason, and sized according to the number of cancellations for that reason. It is important to note that this isn't the total number of cancellations for that airport, but it is the number of cancellations for that primary reason. The corresponding location data for each airport was gathered from the @bts2024mastercoord. \n\nWe can also see that the **most common reason for flight cancellation is the weather**. Though winter might not technically start until the solstice in December, the month of November, and Thanksgiving at the end of it, often sees colder temperatures and more wintery, stormy conditions. Even airports in more temperate climates, like Florida or southern Texas, were still affected by weather and were forced to cancel flights in November 2024. Unfortunately, these cancellations for weather are difficult to predict, so travelers will just have to hope for the best, and airports and airlines will have to work on their weather preparedness. \n\nAs seen in the plot, the airports with the most cancellations are major hubs, **Dallas/Fort Worth International Airport and Denver International Airport**, with 417 and 326 cancellations respectively in the month of November. These are definitely bigger airports with more flights in general, but other similarly large airports like Atlanta, Chicago, and LA, did not have weather cancellations in the hundreds in November 2024. This could mean that the Dallas and Denver airports need to work on improving their preparedness before and/or services during weather events. If possible, maybe choose a different airport than DFW or DEN for Thanksgiving travel!\n\n# Conclusion \n\nEven in 2025, Thanksgiving travel demand made news headlines as passengers, airports, and airlines braced for the holiday impact (@FAA_2025_ThanksgivingTravel). In November 2024, flight numbers peaked in the days before Thanksgiving, significant delays were seen for American, SkyWest, and Allegiant airlines, and Dallas/Fort Worth and Denver Airports saw hundreds of cancellations. With further analysis, these patterns observed in November 2024 could potentially repeat in future years unless improvements are made. Understanding these patterns can not only help passengers prepare to travel home for Thanksgiving celebrations, but also ensure that American aviation is doing its best during the country's most intense travel period. \n\n# References\n\n\n\n\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"jupyter"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":true,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["styles.css"],"toc":true,"embed-resources":true,"output-file":"index.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.7.31","publish":{"gh-pages":true},"theme":["cosmo","brand"],"title":"DSAN 6300 Mini-Project","subtitle":"Thanksgiving Travel 2024: America's Busiest Holiday Travel Period","author":"Eleanor Byrd","date":"last-modified","bibliography":["references.bib"],"code-summary":"Show code"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}